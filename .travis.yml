language: python
python:
  - 3.8

env:
    - ISO=https://archive.org/download/bygg-biler-med-mulle-mekk/Bygg%20biler%20med%20Mulle%20Mekk.iso
    - ISO=https://archive.org/download/byggbilarmedmullemeck/byggbilarmedmullemeck.iso

addons:
  apt:
    packages:
      - nodejs
      - npm
      - ffmpeg

before_install:
  - mkdir bin
  - wget -O bin/magick https://imagemagick.org/download/binaries/magick
  - chmod +x bin/magick
  - export PATH="$PWD/bin:$PATH"
  - magick -version

install:
  - pip install -r requirements.txt
  - npm install

before_script:
  - wget -O mullebil.iso $ISO
  - mkdir ~/mullebil
  - sudo mount -o loop mullebil.iso ~/mullebil

script:
  - echo "travis_fold:start:SCRIPT folding starts"
  - ./extract.sh
  - echo "travis_fold:end:SCRIPT folding ends"
  - npm run build